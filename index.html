<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ููุตุฉ ุดุฑูุญุงุช ุณูุฌูู - ุดุงุฑู ูุชุนูู">
    <title>ุดุฑูุญุงุช ุณูุฌูู</title>
    
    <!-- ุงูุฎุทูุท -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <!-- ========== ุงูููุฏุฑ ========== -->
    <header class="header" id="header">
        <div class="header-container">
            <!-- ุงูููุฌู -->
            <a href="#" class="logo" onclick="showSection('home')">
                <i class="fas fa-play-circle"></i>
                <span>ุดุฑูุญุงุช ุณูุฌูู</span>
            </a>

            <!-- ุงูุจุญุซ -->
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="ุงุจุญุซ ุนู ุดุฑุญ..." onkeyup="searchVideos(event)">
                <button onclick="searchVideos()">
                    <i class="fas fa-search"></i>
                </button>
            </div>

            <!-- ุฃุฒุฑุงุฑ ุงูุชููู - ูุจู ุชุณุฌูู ุงูุฏุฎูู -->
            <nav class="nav-buttons" id="guestNav">
                <button class="btn btn-outline" onclick="showModal('login')">
                    <i class="fas fa-sign-in-alt"></i>
                    <span>ุฏุฎูู</span>
                </button>
                <button class="btn btn-primary" onclick="showModal('register')">
                    <i class="fas fa-user-plus"></i>
                    <span>ุญุณุงุจ ุฌุฏูุฏ</span>
                </button>
            </nav>

            <!-- ุฃุฒุฑุงุฑ ุงูุชููู - ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู -->
            <nav class="nav-buttons" id="userNav" style="display: none;">
                <button class="btn btn-primary" onclick="showSection('upload')">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <span>ุฑูุน ููุฏูู</span>
                </button>
                <div class="user-menu" id="userMenu">
                    <button class="user-avatar" onclick="toggleUserMenu()" id="userAvatarBtn">
                        <span id="userInitial">ู</span>
                    </button>
                    <div class="user-dropdown" id="userDropdown">
                        <div class="user-info">
                            <span class="user-name" id="headerUserName">ุงููุณุชุฎุฏู</span>
                            <span class="user-email" id="headerUserEmail">email@example.com</span>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a onclick="showSection('profile')">
                            <i class="fas fa-user"></i> ูููู ุงูุดุฎุตู
                        </a>
                        <a onclick="showSection('myVideos')">
                            <i class="fas fa-video"></i> ููุฏูููุงุชู
                        </a>
                        <div class="dropdown-divider"></div>
                        <a onclick="logout()" class="logout-link">
                            <i class="fas fa-sign-out-alt"></i> ุชุณุฌูู ุงูุฎุฑูุฌ
                        </a>
                    </div>
                </div>
            </nav>

            <!-- ุฒุฑ ุงููุงุฆูุฉ ููููุจุงูู -->
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <!-- ========== ุงููุญุชูู ุงูุฑุฆูุณู ========== -->
    <main class="main-content">
        
        <!-- ===== ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ===== -->
        <section class="page active" id="homePage">
            <!-- ุงูุจุงูุฑ -->
            <div class="hero">
                <div class="hero-content">
                    <h1>๐ฌ ุดุฑูุญุงุช ุณูุฌูู</h1>
                    <p>ููุตุชู ุงูุฃููู ููุดุงุฑูุฉ ููุดุงูุฏุฉ ุงูุดุฑูุญุงุช ุงูุชุนููููุฉ ุจุฃูุงู ุชุงู</p>
                    <div class="hero-buttons">
                        <button class="btn btn-primary btn-lg" onclick="document.getElementById('videosSection').scrollIntoView({behavior: 'smooth'})">
                            <i class="fas fa-compass"></i> ุงุณุชูุดู ุงูุดุฑูุญุงุช
                        </button>
                        <button class="btn btn-outline btn-lg" id="heroActionBtn" onclick="showModal('register')">
                            <i class="fas fa-rocket"></i> ุงุจุฏุฃ ุงูุขู
                        </button>
                    </div>
                </div>
                <div class="hero-stats">
                    <div class="stat">
                        <span class="stat-number" id="totalVideosCount">0</span>
                        <span class="stat-label">ุดุฑุญ</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" id="totalUsersCount">0</span>
                        <span class="stat-label">ูุณุชุฎุฏู</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" id="totalViewsCount">0</span>
                        <span class="stat-label">ูุดุงูุฏุฉ</span>
                    </div>
                </div>
            </div>

            <!-- ุงูุชุตูููุงุช -->
            <div class="categories-section">
                <div class="categories-container" id="categoriesContainer">
                    <button class="category-btn active" data-category="all">
                        <i class="fas fa-th-large"></i> ุงููู
                    </button>
                    <button class="category-btn" data-category="programming">
                        <i class="fas fa-code"></i> ุจุฑูุฌุฉ
                    </button>
                    <button class="category-btn" data-category="design">
                        <i class="fas fa-palette"></i> ุชุตููู
                    </button>
                    <button class="category-btn" data-category="networks">
                        <i class="fas fa-network-wired"></i> ุดุจูุงุช
                    </button>
                    <button class="category-btn" data-category="security">
                        <i class="fas fa-shield-alt"></i> ุฃูู ุณูุจุฑุงูู
                    </button>
                    <button class="category-btn" data-category="ai">
                        <i class="fas fa-robot"></i> ุฐูุงุก ุงุตุทูุงุนู
                    </button>
                    <button class="category-btn" data-category="other">
                        <i class="fas fa-ellipsis-h"></i> ุฃุฎุฑู
                    </button>
                </div>
            </div>

            <!-- ุงูููุฏูููุงุช -->
            <section class="videos-section" id="videosSection">
                <div class="section-header">
                    <h2><i class="fas fa-fire"></i> ุฃุญุฏุซ ุงูุดุฑูุญุงุช</h2>
                </div>
                <div class="videos-grid" id="videosGrid">
                    <!-- ุงูููุฏูููุงุช ุณุชูุญููู ููุง -->
                </div>
                <div class="loading-videos" id="loadingVideos" style="display: none;">
                    <div class="spinner"></div>
                    <p>ุฌุงุฑู ุชุญููู ุงูุดุฑูุญุงุช...</p>
                </div>
                <div class="no-videos" id="noVideos" style="display: none;">
                    <i class="fas fa-video-slash"></i>
                    <h3>ูุง ุชูุฌุฏ ุดุฑูุญุงุช ุญุงููุงู</h3>
                    <p>ูู ุฃูู ูู ูุฑูุน ุดุฑุญ!</p>
                    <button class="btn btn-primary" onclick="showSection('upload')">
                        <i class="fas fa-upload"></i> ุฑูุน ุดุฑุญ
                    </button>
                </div>
            </section>
        </section>

        <!-- ===== ุตูุญุฉ ูุดุงูุฏุฉ ุงูููุฏูู ===== -->
        <section class="page" id="watchPage">
            <div class="watch-container">
                <!-- ุฒุฑ ุงูุฑุฌูุน -->
                <button class="btn btn-outline back-btn" onclick="showSection('home')">
                    <i class="fas fa-arrow-right"></i> ุฑุฌูุน
                </button>

                <!-- ูุดุบู ุงูููุฏูู -->
                <div class="video-player-wrapper">
                    <div class="protected-video-container" id="videoContainer">
                        <video id="mainPlayer" controls controlsList="nodownload" 
                               disablePictureInPicture oncontextmenu="return false;">
                        </video>
                        <div class="video-watermark" id="videoWatermark"></div>
                        <div class="video-protection-overlay"></div>
                    </div>
                </div>

                <!-- ูุนูููุงุช ุงูููุฏูู -->
                <div class="video-info-section">
                    <h1 class="video-title" id="watchTitle">ุนููุงู ุงูููุฏูู</h1>
                    
                    <div class="video-meta">
                        <div class="meta-right">
                            <span><i class="fas fa-eye"></i> <span id="watchViews">0</span> ูุดุงูุฏุฉ</span>
                            <span><i class="fas fa-calendar"></i> <span id="watchDate">ุงูููู</span></span>
                        </div>
                        <div class="meta-left">
                            <button class="action-btn" id="likeBtn" onclick="toggleLike()">
                                <i class="far fa-heart"></i>
                                <span id="watchLikes">0</span>
                            </button>
                            <button class="action-btn" onclick="shareVideo()">
                                <i class="fas fa-share"></i>
                                ูุดุงุฑูุฉ
                            </button>
                            <button class="action-btn" onclick="reportVideo()">
                                <i class="fas fa-flag"></i>
                                ุฅุจูุงุบ
                            </button>
                        </div>
                    </div>

                    <div class="uploader-info">
                        <div class="uploader-avatar" id="uploaderAvatar">ู</div>
                        <div class="uploader-details">
                            <span class="uploader-name" id="uploaderName">ุงุณู ุงููุงุดุฑ</span>
                            <span class="uploader-videos"><span id="uploaderVideosCount">0</span> ุดุฑุญ</span>
                        </div>
                    </div>

                    <div class="video-description" id="watchDescription">
                        ูุตู ุงูููุฏูู ูุธูุฑ ููุง...
                    </div>
                </div>
            </div>
        </section>

        <!-- ===== ุตูุญุฉ ุฑูุน ููุฏูู ===== -->
        <section class="page" id="uploadPage">
            <div class="upload-container">
                <div class="page-header">
                    <h1><i class="fas fa-cloud-upload-alt"></i> ุฑูุน ุดุฑุญ ุฌุฏูุฏ</h1>
                    <p>ุดุงุฑู ูุนุฑูุชู ูุน ุงููุฌุชูุน</p>
                </div>

                <!-- ููุทูุฉ ุงูุณุญุจ ูุงูุฅููุงุช -->
                <div class="upload-dropzone" id="uploadDropzone">
                    <input type="file" id="videoFileInput" accept="video/*" hidden>
                    <div class="dropzone-content">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <h3>ุงุณุญุจ ุงูููุฏูู ููุง</h3>
                        <p>ุฃู ุงุถุบุท ูุงุฎุชูุงุฑ ููู</p>
                        <span class="file-types">MP4, MOV, WEBM - ุงูุญุฏ ุงูุฃูุตู 50MB</span>
                    </div>
                </div>

                <!-- ุดุฑูุท ุงูุชูุฏู -->
                <div class="upload-progress-section" id="uploadProgressSection" style="display: none;">
                    <div class="progress-info">
                        <span id="uploadFileName">video.mp4</span>
                        <span id="uploadPercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="uploadProgressFill"></div>
                    </div>
                    <p id="uploadStatus">ุฌุงุฑู ุงูุฑูุน...</p>
                </div>

                <!-- ูููุฐุฌ ูุนูููุงุช ุงูููุฏูู -->
                <form class="upload-form" id="uploadForm" style="display: none;">
                    <!-- ูุนุงููุฉ ุงูููุฏูู -->
                    <div class="video-preview">
                        <video id="previewVideo" controls></video>
                    </div>

                    <div class="form-grid">
                        <!-- ุงูุนููุงู -->
                        <div class="form-group full-width">
                            <label for="uploadTitle">
                                <i class="fas fa-heading"></i> ุนููุงู ุงูุดุฑุญ *
                            </label>
                            <input type="text" id="uploadTitle" 
                                   placeholder="ุฃุฏุฎู ุนููุงู ูุงุถุญ ููุตูู ููุดุฑุญ" 
                                   required maxlength="100">
                            <span class="char-count"><span id="titleCount">0</span>/100</span>
                        </div>

                        <!-- ุงููุตู -->
                        <div class="form-group full-width">
                            <label for="uploadDescription">
                                <i class="fas fa-align-left"></i> ุงููุตู
                            </label>
                            <textarea id="uploadDescription" 
                                      placeholder="ุงูุชุจ ูุตูุงู ุชูุตูููุงู ููุดุฑุญ..."
                                      rows="4" maxlength="500"></textarea>
                            <span class="char-count"><span id="descCount">0</span>/500</span>
                        </div>

                        <!-- ุงูุชุตููู -->
                        <div class="form-group">
                            <label for="uploadCategory">
                                <i class="fas fa-folder"></i> ุงูุชุตููู *
                            </label>
                            <select id="uploadCategory" required>
                                <option value="">ุงุฎุชุฑ ุชุตููู</option>
                                <option value="programming">ุจุฑูุฌุฉ</option>
                                <option value="design">ุชุตููู</option>
                                <option value="networks">ุดุจูุงุช</option>
                                <option value="security">ุฃูู ุณูุจุฑุงูู</option>
                                <option value="ai">ุฐูุงุก ุงุตุทูุงุนู</option>
                                <option value="other">ุฃุฎุฑู</option>
                            </select>
                        </div>

                        <!-- ุฎูุงุฑุงุช ุงูุญูุงูุฉ -->
                        <div class="form-group full-width">
                            <label><i class="fas fa-shield-alt"></i> ุฎูุงุฑุงุช ุงูุญูุงูุฉ</label>
                            <div class="checkbox-options">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="protectDownload" checked>
                                    <span class="checkmark"></span>
                                    <span>ููุน ุงูุชุญููู</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="showWatermark" checked>
                                    <span class="checkmark"></span>
                                    <span>ุฅุธูุงุฑ ุนูุงูุฉ ูุงุฆูุฉ</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- ุฃุฒุฑุงุฑ ุงูุฅุฑุณุงู -->
                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" onclick="resetUpload()">
                            <i class="fas fa-times"></i> ุฅูุบุงุก
                        </button>
                        <button type="submit" class="btn btn-primary btn-lg" id="publishBtn">
                            <i class="fas fa-upload"></i> ูุดุฑ ุงูุดุฑุญ
                        </button>
                    </div>
                </form>
            </div>
        </section>

        <!-- ===== ุตูุญุฉ ุงูููู ุงูุดุฎุตู ===== -->
        <section class="page" id="profilePage">
            <div class="profile-container">
                <!-- ุบูุงู ุงูููู ุงูุดุฎุตู -->
                <div class="profile-cover">
                    <div class="profile-avatar-large">
                        <span id="profileInitial">ู</span>
                    </div>
                </div>

                <!-- ูุนูููุงุช ุงููุณุชุฎุฏู -->
                <div class="profile-info-section">
                    <h1 id="profileName">ุงุณู ุงููุณุชุฎุฏู</h1>
                    <p id="profileEmail">email@example.com</p>
                    <p id="profileJoinDate">ุงูุถู ูู: ...</p>

                    <!-- ุฅุญุตุงุฆูุงุช -->
                    <div class="profile-stats">
                        <div class="stat-card">
                            <i class="fas fa-video"></i>
                            <span class="stat-value" id="profileVideosCount">0</span>
                            <span class="stat-label">ููุฏูู</span>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-eye"></i>
                            <span class="stat-value" id="profileViewsCount">0</span>
                            <span class="stat-label">ูุดุงูุฏุฉ</span>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-heart"></i>
                            <span class="stat-value" id="profileLikesCount">0</span>
                            <span class="stat-label">ุฅุนุฌุงุจ</span>
                        </div>
                    </div>
                </div>

                <!-- ููุฏูููุงุช ุงููุณุชุฎุฏู -->
                <div class="profile-videos-section">
                    <h2><i class="fas fa-video"></i> ููุฏูููุงุชู</h2>
                    <div class="videos-grid" id="profileVideosGrid">
                        <!-- ุณุชูุญููู ููุง -->
                    </div>
                </div>
            </div>
        </section>

        <!-- ===== ุตูุญุฉ ููุฏูููุงุชู ===== -->
        <section class="page" id="myVideosPage">
            <div class="my-videos-container">
                <div class="section-header">
                    <h2><i class="fas fa-video"></i> ููุฏูููุงุชู</h2>
                    <button class="btn btn-primary" onclick="showSection('upload')">
                        <i class="fas fa-plus"></i> ุฑูุน ููุฏูู ุฌุฏูุฏ
                    </button>
                </div>
                <div class="videos-grid" id="myVideosGrid">
                    <!-- ุณุชูุญููู ููุง -->
                </div>
            </div>
        </section>

    </main>

    <!-- ========== ูุงูุฐุฉ ุชุณุฌูู ุงูุฏุฎูู ========== -->
    <div class="modal-overlay" id="loginModal">
        <div class="modal">
            <button class="modal-close" onclick="hideModal('login')">
                <i class="fas fa-times"></i>
            </button>
            
            <div class="modal-header">
                <i class="fas fa-sign-in-alt"></i>
                <h2>ุชุณุฌูู ุงูุฏุฎูู</h2>
                <p>ูุฑุญุจุงู ุจุนูุฏุชู!</p>
            </div>

            <form id="loginForm" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="loginEmail">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                    <div class="input-icon">
                        <i class="fas fa-envelope"></i>
                        <input type="email" id="loginEmail" required 
                               placeholder="example@email.com">
                    </div>
                </div>

                <div class="form-group">
                    <label for="loginPassword">ูููุฉ ุงููุฑูุฑ</label>
                    <div class="input-icon">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="loginPassword" required 
                               placeholder="โขโขโขโขโขโขโขโข">
                        <button type="button" class="toggle-password" onclick="togglePassword('loginPassword')">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary btn-block" id="loginBtn">
                    <span>ุชุณุฌูู ุงูุฏุฎูู</span>
                    <i class="fas fa-arrow-left"></i>
                </button>
            </form>

            <div class="modal-footer">
                <p>ููุณ ูุฏูู ุญุณุงุจุ 
                    <a onclick="switchModal('login', 'register')">ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ</a>
                </p>
            </div>
        </div>
    </div>

    <!-- ========== ูุงูุฐุฉ ุงูุชุณุฌูู ========== -->
    <div class="modal-overlay" id="registerModal">
        <div class="modal">
            <button class="modal-close" onclick="hideModal('register')">
                <i class="fas fa-times"></i>
            </button>
            
            <div class="modal-header">
                <i class="fas fa-user-plus"></i>
                <h2>ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ</h2>
                <p>ุงูุถู ุฅูู ูุฌุชูุน ุณูุฌูู</p>
            </div>

            <form id="registerForm" onsubmit="handleRegister(event)">
                <div class="form-group">
                    <label for="registerName">ุงูุงุณู ุงููุงูู</label>
                    <div class="input-icon">
                        <i class="fas fa-user"></i>
                        <input type="text" id="registerName" required 
                               placeholder="ุฃุฏุฎู ุงุณูู" minlength="3">
                    </div>
                </div>

                <div class="form-group">
                    <label for="registerEmail">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                    <div class="input-icon">
                        <i class="fas fa-envelope"></i>
                        <input type="email" id="registerEmail" required 
                               placeholder="example@email.com">
                    </div>
                </div>

                <div class="form-group">
                    <label for="registerPassword">ูููุฉ ุงููุฑูุฑ</label>
                    <div class="input-icon">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="registerPassword" required 
                               placeholder="โขโขโขโขโขโขโขโข" minlength="6">
                        <button type="button" class="toggle-password" onclick="togglePassword('registerPassword')">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <small class="input-hint">ุนูู ุงูุฃูู 6 ุฃุญุฑู</small>
                </div>

                <div class="form-group">
                    <label for="confirmPassword">ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ</label>
                    <div class="input-icon">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="confirmPassword" required 
                               placeholder="โขโขโขโขโขโขโขโข">
                    </div>
                </div>

                <button type="submit" class="btn btn-primary btn-block" id="registerBtn">
                    <span>ุฅูุดุงุก ุงูุญุณุงุจ</span>
                    <i class="fas fa-arrow-left"></i>
                </button>
            </form>

            <div class="modal-footer">
                <p>ูุฏูู ุญุณุงุจ ุจุงููุนูุ 
                    <a onclick="switchModal('register', 'login')">ุชุณุฌูู ุงูุฏุฎูู</a>
                </p>
            </div>
        </div>
    </div>

    <!-- ========== ุงูุฅุดุนุงุฑุงุช ========== -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- ========== ุงูุชุญููู ุงูุนุงู ========== -->
    <div class="full-loader" id="fullLoader">
        <div class="loader-content">
            <div class="spinner-large"></div>
            <p id="loaderText">ุฌุงุฑู ุงูุชุญููู...</p>
        </div>
    </div>

    <!-- ========== Supabase SDK ========== -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- ========== ูููุงุช JavaScript ========== -->
    <script src="js/supabase-config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/videos.js"></script>
    <script src="js/upload.js"></script>
    <script src="js/protection.js"></script>
    <script src="js/app.js"></script>

</body>
</html>